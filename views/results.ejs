<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>Projects - Brand</title>
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,400,700">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Audiowide">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Knewave">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Leckerli+One">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Press+Start+2P">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Prosto+One">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Revalia">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web:400,600,700">
    <link rel="stylesheet" href="assets/fonts/fontawesome-all.min.css">
    <link rel="stylesheet" href="assets/fonts/ionicons.min.css">
    <link rel="stylesheet" href="assets/css/Animated-CSS-Waves-Background-SVG.css">
    <link rel="stylesheet" href="assets/css/Animated-Typing-With-Blinking.css">
    <link rel="stylesheet" href="assets/css/Button-Change-Text-on-Hover.css">
    <link rel="stylesheet" href="assets/css/Check-Out-Page-V100.css">
    <link rel="stylesheet" href="assets/css/dh-header-cover-image-button.css">
    <link rel="stylesheet" href="assets/css/dh-header-non-rectangular.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pikaday/1.6.1/css/pikaday.min.css">
    <link rel="stylesheet" href="assets/css/Search-Input-Responsive-with-Icon.css">
    <link rel="stylesheet" href="assets/css/Search-Input-responsive.css">
    <link rel="stylesheet" href="assets/css/untitled-1.css">
    <link rel="stylesheet" href="assets/css/untitled-2.css">
    <link rel="stylesheet" href="assets/css/untitled-3.css">
    <link rel="stylesheet" href="assets/css/untitled.css">
    <link rel="stylesheet" href="assets/css/Wave-Flow-Animation.css">
</head>

<body>
    <nav class="navbar navbar-dark navbar-expand-lg fixed-top bg-white portfolio-navbar gradient"
        style="background: var(--bs-white);border-top-left-radius: 0px;border-bottom-right-radius: 0px;border-bottom-left-radius: 0px;box-shadow: inset 0px 0px 7px 0px #3f2b96;border: 0px ridge var(--bs-indigo);">
        <div class="container"><a class="navbar-brand text-center d-lg-flex align-items-lg-center logo" href="home"
                style="color: var(--bs-indigo);border-width: 0px;border-color: var(--bs-indigo);font-family: Audiowide, serif;font-size: 20px;transform: rotateX(0deg);"><i
                    class="fas fa-spider"
                    style="padding-left: 8px;color: var(--bs-indigo);transform: scale(1.18);border-color: var(--bs-indigo);background: rgba(255,255,255,0.75);"></i>
                <p class="text-center d-lg-flex"
                    style="color: var(--bs-indigo);font-weight: 500;text-align: center;margin-bottom: 0px;padding-left: 13px;">
                    Search Time</p>
            </a></div>
    </nav>
    <main class="page projets-page">
        <section class="portfolio-block project-no-images" style="padding-bottom: 40px;padding-top: 40px;">
            <div class="container">
                <div class="text-start heading" style="margin-top: 25px;">
                    <div class="col" style="text-align: left;">
                        <h2 class="text-start d-inline"
                            style="font-family: Audiowide, serif;transform: scale(0.60);color: var(--bs-indigo);">
                            Search&nbsp; results</h2>
                        <div class="row">
                            <div class="col-md-10 offset-md-1">
                                <div class="card m-auto" style="max-width: 850px;border-width: 0px;">
                                    <div class="card-body">



                                        <form class="d-flex align-items-center" method="POST"
                                            style="height: 54px;padding: 30px;"><i
                                                class="fas fa-search d-none d-sm-block h4 text-body m-0"></i><input
                                                list="sugesstions"
                                                id="searchinput"
                                                class="form-control flex-shrink-1 form-control-borderless" type="search"
                                                placeholder="Search topics or keywords" name="searchbar"
                                                autocomplete="off" required=""><button class="btn btn-success btn-lg"
                                                data-bss-hover-animate="pulse" type="submit"
                                                style="transform: scale(0.82);background: var(--bs-indigo);box-shadow: inset 0px 0px 9px 0px var(--bs-white);border-width: 0px;width: auto;height: auto;">Search</button>
                                                <datalist id="sugesstions"></datalist>
                                        </form>
                                        </form>



                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                 <!--  <%if(results !="" ){%>
                        <%for (let i of results){%>
                    <div class="col">
                        <div class="text-start project-card-no-image" style="background: var(--bs-white);border-color: var(--bs-indigo);"><a href="<%= i.URL%>"style="color: var(--bs-indigo);font-weight: 700;font-size: 22px;"><%= i.Title%></a>
                            <h4> <%=i.Content%>&nbsp;</h4><a class="btn btn-outline-primary btn-sm" role="button" href="#" style="/*background: #ffffff;*/border-color: var(--bs-purple);border-bottom-color: var(--bs-purple);">see more</a>
                        </div>
                    </div>
                    <%}%>
                    <%}%> -->
                     <div id="list"></div>
                    
                    <div class="pagination" id="pagination"></div>
                   
                </div>
            </div>
        </section>
    </main>
    <footer class="page-footer" style="box-shadow: inset 0px 0px 5px var(--bs-purple);">
        <div class="container">
            <div class="social-icons"><a href="https://github.com/Essamwisam/SearchTime"><i
                        class="icon ion-social-github"></i></a></div>
        </div>
    </footer>
    <script src="assets/bootstrap/js/bootstrap.min.js"></script>
    <script src="assets/js/bs-init.js"></script>
    <script src="assets/js/Animated-Typing-With-Blinking.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pikaday/1.6.1/pikaday.min.js"></script>
    <script src="assets/js/theme.js"></script>

 <script type="text/javascript">

    var text_to_display = document.getElementById("searchinput");
    text_to_display.value = "bla blaaa";
    var output='<%- JSON.stringify(results) %>';

   text_to_display.value = output;
   const listItems = JSON.parse(output);

    const listEl = document.getElementById("list");
    const paginationEl = document.getElementById("pagination");

    let currentPage = 1;
    let rows = 10;
    let pageCount = Math.ceil(listItems.length / rows);
function displayList(items,wrapper,rowsPerPage,page)
 {
  wrapper.innerHTML = "";
  page--;

  let start = rowsPerPage * page;
  let end = start + rowsPerPage;

  let paginatedItems = items.slice(start, end);
 
  for (let i = 0; i < paginatedItems.length; i++) {
    let item = paginatedItems[i].URL;
    let title= paginatedItems[i].Title;
    let content= paginatedItems[i].Content;
    let itemEl = document.createElement("div");
    itemEl.className ="col";
    let itemE2 = document.createElement("div");
    itemE2.className  = "text-start project-card-no-image";
    itemE2.style= "background: var(--bs-white);border-color: var(--bs-indigo);";
    let itemE3 = document.createElement("a");
    itemE3.style="color: var(--bs-indigo);font-weight: 700;font-size: 22px;";
    itemE3.href=item;
    itemE3.appendChild(document.createTextNode(title));
    let itemE4 = document.createElement("h4");
    itemE4.appendChild(document.createTextNode(content));
    let itemE5= document.createElement("a");
    itemE5.className ="btn btn-outline-primary btn-sm";
    itemE5.role="button";
    itemE5.href=item;
    itemE5.style="border-color: var(--bs-purple);border-bottom-color: var(--bs-purple);";
    itemE5.appendChild(document.createTextNode("see more"));
    wrapper.appendChild(itemEl);
    itemEl.appendChild(itemE2);
    itemE2.appendChild(itemE3);
    itemE2.appendChild(itemE4);
    itemE2.appendChild(itemE5);
  }
}

function setupPagination(items,wrapper,rowsPerPage) {
  wrapper.innerHTML = "";
  
 
  for (let i = 0; i < pageCount + 2; i++) {
    const btn = paginationButton(i, listItems);
    wrapper.appendChild(btn);
  }
 
}

function paginationButton(page, items) {
  const button = document.createElement("button");
  button.id= page.toString();
  button.type="submit";
  if(page===0) //prev
  {
    button.textContent="<<";
    
  }
  else if(page===pageCount+1) //next
  {
    button.textContent=">>";
    
    
  }
  else{
  button.textContent = page.toString();

  if (currentPage === page) {
    button.classList.add("active");
  }
  }
  button.addEventListener("click", function () {
    document.body.scrollTop = 0; // For Safari
    document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera
    if(page==0)
    {
        if(currentPage>1)
            currentPage=currentPage - 1;
    }
    else if(page==pageCount+1)
    {
        if(currentPage<pageCount)
            currentPage=currentPage + 1;
    }
    else
    {
    currentPage = page;
    }
    displayList(listItems, listEl, rows, currentPage);
    
    let currentBtn = document.querySelector(
      ".pagination button.active"
    );
    currentBtn?.classList.remove("active");
    let newBtn= document.getElementById(currentPage);
    newBtn.classList.add("active");
  });

  return button;
}


displayList(listItems, listEl, rows, currentPage);
setupPagination(listItems, paginationEl, rows);  */

    </script>
<script>
	
    var word;
    const input = document.getElementById('searchinput');
    const debounce = (fn, time) => {
        let timeout;
        return (...arguments) => {
            clearTimeout(timeout);
            timeout = setTimeout(() => fn.apply(this, arguments), time);
        }
    }
    input.addEventListener('keyup', debounce(e =>
        handleKeyPress(e), 300));
    function handleKeyPress(e) {
        var options = '';
        word = input.value;
        fetch(`http://localhost:3000/auto?word=${word}`)
            .then(res => {
                if (res.ok)
                    return res.json();
                return Promise.reject(response);
            }).then(arr => {
                for (i = 0; i < arr.length; i++) {
                    options += '<option value="' + arr[i]['WORD'] + '" />';
                }
                document.getElementById('sugesstions').innerHTML = options;
            }).catch(error => {
                console.warn(error);
            });


    }


</script>
</body>
</html>